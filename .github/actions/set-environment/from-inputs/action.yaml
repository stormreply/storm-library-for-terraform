name: Set environment from inputs

inputs:
  yaml:
    required: true

runs:
  using: composite
  steps:
    - name: set environment from inputs
      id: set-environment-from-inputs
      shell: bash
      run: |
        # set/env/from-input
        yaml="${{ inputs.yaml }}"
        # echo "$yaml"
        IFS=$'\n' lines=($yaml)
        for l in "${lines[@]}" ; do
          key=${l%%:*}
          val=${l##*: }
          if [ -n "$val" ] ; then
            echo "$key=$val" | tee -a $GITHUB_ENV
          else
            echo "ERROR: $key is empty. exiting."
            exit 1
          fi
        done
